---
title: spring声明式事务底层源码
tags: 
- spring
categories:
- spring
---

# 注解
* 开启事务管理功能，对@Transactional起作用：EnableTransactionManagement

源码和AOP相似

* @EnableTransactionManagement
	* @Import(TransactionManagementConfigurationSelector.class)
			* AutoProxyRegistrar.registerBeanDefinitions()
				* 注册InfrastructureAdvisorAutoProxyCreator
			* ProxyTransactionManagementConfiguration
				* transactionAttributeSource()
					* AnnotationTransactionAttributeSource()
						* SpringTransactionAnnotationParser() ：解析@Transactional的属性
				* TransactionInterceptor() : 实现了MethodInterceptor，被AOP拦截
					* completeTransactionAfterThrowing(txInfo, ex);