#一、微服务

## 1.服务是如何拆分的？怎么考虑的？

答得不好，说了拆分成网关，用户，流程，文档

## 2.网关都有哪些作用？

说了动态路由转发，统一鉴权，限流，降级

## 3.鉴权和认证的区别？

没答上来，该打，这个看过的

鉴权：已经认证成功，对某个操作是否有权限

认证：登录时做的

## 4.做过压测没有？怎么实现限流，降级？

没有做过，限流，降级使用hystrix

## 5.hystrix限流降级的原理是什么？

不知道

降级：mysql挂了，系统发现了，自动降级，从内存里存的少量数据红，去提取一些数据出来。

## 6.hystrix和其他的限流工具，如何选型？

不知道

其他限流工具：HA,HAProxy

## 7.注册中心用的哪个？区别是什么？

用的eureka；eureka实现的是AP原则，Zookeeper实现的是CP;

解释一下分区容错性？

为什么C和A不能一起实现？一致性的保证需要时间，举例zk的leader节点挂掉，需要等待选举新的leader

## 8.eureka实现高可用的原理是什么？

说了心跳，自我保护机制

应该是集群部署

## 9.一个系统使用的是eureka集群，如果eureka都挂了，服务之间还能正常通信吗？为什么？

答了可以，因为服务会从eureka拉取服务注册表，服务注册表里面包含有其他服务的ip，端口信息；提到了负载均衡

##10.feign是客户端还是服务端的负载均衡器？

客户端；**说了nginx是服务端的负载均衡，因为请求都发到nginx上，由nginx负责转发，这个的确认一下**

## 11.Spring Cloud Config，怎么保证修改了配置以后实时生效？

说了devtools，好像不对

spring config+spring bus+MQ

# 二、java基础

## 1.volatile关键字的作用是什么？

一下子想不起来了，。。。。

## 2.面试官直接问volatile怎么实现内存可见性？

说了从变量从内存中获取值

## 3.为什么线程不直接从主内存中获取值呢？

**说了为了实现多线程机制，保证变量不被同时修改。不知道对不对。**

# 三、设计模式

##1.单例模式

说了懒汉，怎么实现，又说了双重校验锁，最简单的实现，面试官直接说了枚举

Spring创建的类是单例的，为什么还要自己写单例呢？乱说一通，可以这样回答：Spring创建的类的对象默认是单例，但是有些类不需要Spring管理，像util工具类，就是这样的，要保证单实例，但是不需要Spring去管理

## 2.适配器

知道有哪几种适配器？类适配器，对象适配器，还有其他的

## 3.责任链模式

项目中的场景是什么？说了数据多层过滤，面试官还不满意，让继续说，答不上来；为什么不用策略模式去实现？

## 4.代理模式

没让介绍

## 还有没有其他的

说不上来了

# 四、jvm

## 1.jvm内存模型

竟然一下子没说上来，看来面试前的准备很重要

## 2.说一下一个对象在堆上创建到销毁的生命周期

从eden到，suvivor，到old区，每经过一次GC，对象的年龄加1，

## 3.年轮超过多少会晋升？年轮存在哪里？

说了15次，不太确定；

年轮存在对象头里，不太确定；

#五、mysql

## 1.mysql是如何实现事务的？

本来想从事务的四大特性说起，被打断了。又提到了binlog，感觉不了解binlog，刹住了；说使用redolog

实现事务的回滚。应该是undolog才对。

## 2.mysql主从复制原理

不知道

binlog日志

#六、多线程

## 1.AQS了解吗？

说了每个节点存一个Thread信息，只有队列头部的线程才能尝试获取锁，然后又问道怎么判断同一个对象，不知道，说了使用线程id，面试官觉得好像不对，也没说什么？应该是想问CAS算法吧。。。